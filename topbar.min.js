/*! topbar 0.1.3, 2015-02-26
 *  http://buunguyen.github.io/topbar
 *  Copyright (c) 2015 Buu Nguyen
 *  Licensed under the MIT License */
(function(a,b){"use strict";!function(){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}();var c,d,e,f,g,h,i=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},j=function(a,b){var c;return function(){c&&clearTimeout(c),c=setTimeout(function(){c=null,a()},b)}},k={zIndex:100001,autoRun:!0,barThickness:3,barColors:{0:"rgba(26, 188, 156, .9)",".25":"rgba(52, 152, 219, .9)",".50":"rgba(241, 196, 15, .9)",".75":"rgba(230, 126, 34, .9)","1.0":"rgba(211, 84, 0, .9)"},shadowBlur:10,shadowColor:"rgba(0, 0, 0, .6)"},l=function(){var a=c.getContext("2d"),b=c.width,e=c.height,f=.5+Math.ceil(g*b)|0;a.clearRect(0,0,b,e),a.drawImage(d,0,0,f,e,0,0,f,e)},m=function(){c||(c=b.createElement("canvas"),c.style.position="fixed",c.style.top=c.style.left=c.style.right=c.style.margin=c.style.padding=0,c.style.zIndex=k.zIndex,c.style.display="none",b.body.appendChild(c),d=b.createElement("canvas"),i(a,"resize",j(function(){m(),h&&l()},100)));var e=a.innerWidth,f=5*k.barThickness;c.width=d.width=e,c.height=d.height=f;var g=d.getContext("2d");g.clearRect(0,0,e,f),g.lineWidth=k.barThickness,g.shadowBlur=k.shadowBlur,g.shadowColor=k.shadowColor;var n=g.createLinearGradient(0,0,e,0);for(var o in k.barColors)n.addColorStop(o,k.barColors[o]);g.strokeStyle=n,g.beginPath(),g.moveTo(0,k.barThickness/2),g.lineTo(e,k.barThickness/2),g.stroke()},n={config:function(a){for(var b in a)k.hasOwnProperty(b)&&(k[b]=a[b]);m(),h&&l()},show:function(){h||(h=!0,c||m(),null!=f&&(a.cancelAnimationFrame(f),f=null),c.style.display="block",c.style.opacity=1,n.progress(0),k.autoRun&&!function b(){e=a.requestAnimationFrame(b),n.progress("+"+.05*Math.pow(1-Math.sqrt(g),2))}())},progress:function(a){return"undefined"==typeof a?g:("string"==typeof a&&(a=(a.indexOf("+")>=0||a.indexOf("-")>=0?g:0)+parseFloat(a)),g=a>1?1:a,l(),g)},hide:function(){h&&(h=!1,null!=e&&(a.cancelAnimationFrame(e),e=null),function b(){return n.progress("+.1")>=1&&(c.style.opacity-=.05,c.style.opacity<=.05)?(c.style.display="none",void(f=null)):void(f=a.requestAnimationFrame(b))}())}};"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):this.topbar=n}).call(this,window,document);